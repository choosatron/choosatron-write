	<div class="passage">
		<div class="passageExits">
			<!-- TODO: support for ending/append needs to be worked out. -->
			<!-- TODO: need confirmation dialog when switching between these types -->
			<ul class="nav nav-tabs nav-justified">
				<li><a data-target="#passageEnding" data-toggle="tab">Set as Ending</a></li>
				<li><a data-target="#passageAppend" data-toggle="tab">Append a Passage</a></li>
				<li class="active"><a data-target="#passageChoices" data-toggle="tab">Add Choices</a></li>
			</ul>

			<div class="tab-content">
				<div class="tab-pane passageEnding" id="passageEnding">
					<div class="btn-toolbar" role="toolbar">
						<div class="btn-group h4">Ending Value:</div>
						<div class="btn-group btn-group-lg">
							<button type="button" class="btn btn-default btn-primary">Great</button>
							<button type="button" class="btn btn-default btn-success">Good</button>
							<button type="button" class="btn btn-default">Neutral</button>
							<button type="button" class="btn btn-default btn-warning">Bad</button>
							<button type="button" class="btn btn-default btn-danger">Terrible</button>
						</div>
					</div>
				</div><!-- .passageEnding -->


				<div class="tab-pane passageAppend" id="passageAppend">
					<p class="h4 text-center"><a><span class="glyphicon glyphicon-link"></span> New passage</a> <a><span class="glyphicon glyphicon-link"></span> Existing passage</a></p>
				</div><!-- .passageAppend -->


				<div class="tab-pane active passageChoices" id="passageChoices">

					<!-- TODO: choices probably need a drag+drop handle for sortable behavior -->
					<div ng-repeat="choice in passage.choices" class="choiceContainer">
						<div class="col-xs-2 choiceUtil icon-subtler">
							<a class="h3" confirm-click="delete_choice(passage, choice)" confirm-message="Delete choice?"><span class="glyphicon glyphicon-minus-sign"></span></a>
							<span class="choiceNumber">{{ $index + 1 }}</span>
						</div>

						<div class="col-xs-9">
							<p><input ng-model="choice.content" type="text" class="form-control" placeholder="Write your choice content here." value="" /></p>

							<!-- Neither of these can happen right now because there is a UI overlay blocking the user from clicking this... but they are still a good theorhetical questions: -->
									<!-- TODO: Potentially buggy scenario with picking mode... user has N unfinished choices, and they click "Existing Passage" for one of them, and then also clicks "Existing Passage" for a different one of them before making a selection for the first... -->
									<!-- TODO: what happens if you click "Existing Passage" and then immediately pick "New Passage"?? -->
							<p ng-if="!choice.has_destination()" class="choicePassageMenu"><a ng-click="new_passage(choice)"><span class="glyphicon glyphicon-link"></span> New passage</a> <a ng-click="pick_passage(choice)"><span class="glyphicon glyphicon-link"></span> Existing passage</a></p>

							<!-- TODO: this multiple paths per choice thing might go away... it is not something we're supporting right now -->
							<div ng-if="choice.has_destination()" ng-repeat="path in choice.paths">
								<div ng-if="path.destination" class="choicePassage">
									<a class="choicePassageUnlink icon-subtle" ng-click="choice.set_destination(null)"><span class="glyphicon glyphicon-remove-circle"></span></a>

									<a class="truncated" ng-click="edit_passage(path.destination)">"{{ get_passage(path.destination).get_content() | truncate }}"</a>

									<a ng-click="edit_passage(path.destination)"><span class="passageLink" data-choices="9">P{{ get_passage(path.destination).number }}</span></a>
								</div>
							</div>
						</div>

						<!-- TODO: need to add support for showing collapsed pre/post logic sections -->
						<div class="col-xs-1 choiceLogic h4">
							<a><span class="glyphicon glyphicon-eye-open"></span></a>
							<a><span class="glyphicon glyphicon-cog"></span></a>
						</div>
					</div>



					<!-- TODO: static example code just here for reference until I integrate all this -->
					<div ng-show="false">
					<hr />
					<hr />
					<div class="choiceContainer">
						<div class="col-xs-2 choiceUtil icon-subtler">
							<a class="h3" href="#"><span class="glyphicon glyphicon-minus-sign"></span></a>
							<span class="choiceNumber">2</span>
						</div>
						<div class="col-xs-9">
							<p><input type="text" class="form-control" placeholder="Write your choice content here." value="Take the road to the left." /></p>

							<p class="choicePassage"><a class="choicePassageUnlink icon-subtle" href="#"><span class="glyphicon glyphicon-remove-circle"></span></a> <a href="#">"Lorem ipsum this is the text of passage 45&hellip;" <span class="passageLink" data-choices="4">P45</span></a></p>
						</div>
						<div class="col-xs-1 choiceLogic h4">
							<a href="#" class=""><span class="glyphicon glyphicon-eye-open"></span></a>
							<a href="#"><span class="glyphicon glyphicon-book"></span></a>
						</div>
					</div>

					<div class="choiceContainer">
						<div class="choiceDisplayConditions">
							<p><strong>Display choice if:</strong></p>

							<div class="row">
								<div class="col-xs-1 h4"><a href="#" class="icon-subtle"><span class="glyphicon glyphicon-remove-circle"></span></a></div>
								<div class="col-xs-4"><input type="text" class="form-control var" placeholder="Value" /></div>
								<div class="col-xs-3">
								<select class="form-control">
									<option>equals</option>
									<option>does not equal</option>
									<option>greater than</option>
									<option>less than</option>
								</select>
								</div>
								<div class="col-xs-4"><input type="text" class="form-control var" placeholder="Value" /></div>
							</div>

							<p class="quip"><span class="glyphicon glyphicon-arrow-down"></span></p>
						</div><!-- .choiceDisplayConditions -->
						<div class="col-xs-2 choiceUtil icon-subtler">
							<a class="h3" href="#"><span class="glyphicon glyphicon-minus-sign"></span></a>
							<span class="choiceNumber">3</span>
						</div>
						<div class="col-xs-9">
							<p><input type="text" class="form-control" placeholder="Write your choice content here." value="Place the skull onto the pedestal." /></p>

							<p class="choicePassage"><a class="choicePassageUnlink icon-subtle" href="#"><span class="glyphicon glyphicon-remove-circle"></span></a> <a href="#">"Lorem ipsum this is the text of passage 45&hellip;" <span class="passageLink">P45</span></a></p>
						</div>
						<div class="col-xs-1 choiceLogic h4">
							<a href="#" class="active"><span class="glyphicon glyphicon-eye-open"></span></a>
							<a href="#"><span class="glyphicon glyphicon-book"></span></a>
						</div>
					</div>

					<div class="choiceContainer">
						<div class="choiceDisplayConditions dcCollapsedSet">
							<p>Display choice if <var>crystalSkulls</var> <em>greater than</em> <var>0</var></p>

							<p class="quip"><span class="glyphicon glyphicon-arrow-down"></span></p>
						</div><!-- .choiceDisplayConditions -->
						<div class="col-xs-2 choiceUtil icon-subtler">
							<a class="h3" href="#"><span class="glyphicon glyphicon-minus-sign"></span></a>
							<span class="choiceNumber">4</span>
						</div>
						<div class="col-xs-9">
							<p><input type="text" class="form-control" placeholder="Write your choice content here." value="Place the skull onto the pedestal." /></p>

							<p class="choicePassage"><a class="choicePassageUnlink icon-subtle" href="#"><span class="glyphicon glyphicon-remove-circle"></span></a> <a href="#">"Lorem ipsum this is the text of passage 45&hellip;" <span class="passageLink" data-choices="6">P45</span></a></p>
						</div>
						<div class="col-xs-1 choiceLogic h4">
							<a href="#"><span class="glyphicon glyphicon-eye-open"></span></a>
							<a href="#"><span class="glyphicon glyphicon-book"></span></a>
						</div>
					</div>

					<div class="choiceContainer">
						<div class="col-xs-2 choiceUtil icon-subtler">
							<a class="h3" href="#"><span class="glyphicon glyphicon-minus-sign"></span></a>
							<span class="choiceNumber">5</span>
						</div>
						<div class="col-xs-9">
							<p><input type="text" class="form-control" placeholder="Write your choice content here." value="Place the skull onto the pedestal." /></p>

							<p class="choicePassage"><a class="choicePassageUnlink icon-subtle" href="#"><span class="glyphicon glyphicon-remove-circle"></span></a> <a href="#">"Lorem ipsum this is the text of passage 45&hellip;" <span class="passageLink" data-choices="8">P45</span></a></p>
						</div>
						<div class="col-xs-1 choiceLogic h4">
							<a href="#"><span class="glyphicon glyphicon-eye-open"></span></a>
							<a href="#" class="active"><span class="glyphicon glyphicon-book"></span></a>
						</div>
						<div class="choiceStoryUpdates">
							<p><strong>When choice selected, update story:</strong></p>

							<div class="row">
								<div class="col-xs-1 h4"><a href="#" class="icon-subtle"><span class="glyphicon glyphicon-remove-circle"></span></a></div>
								<div class="col-xs-4"><input type="text" class="form-control var" placeholder="Variable" value="crystalSkulls" /></div>
								<div class="col-xs-3">
								<select class="form-control">
									<option>set to</option>
									<option>set to opposite</option>
									<option>increase by</option>
									<option selected>decrease by</option>
									<option>multiply by</option>
									<option>divide by</option>
								</select>
								</div>
								<div class="col-xs-4"><input type="text" class="form-control var" placeholder="Value" value="1" /></div>
							</div>

							<div class="row row-gutter-1x">
								<div class="col-xs-1 h4"><a href="#" class="icon-subtle"><span class="glyphicon glyphicon-remove-circle"></span></a></div>
								<div class="col-xs-4"><input type="text" class="form-control var" placeholder="Variable" /></div>
								<div class="col-xs-3">
								<select class="form-control">
									<option>set to</option>
									<option>set to opposite</option>
									<option>increase by</option>
									<option>decrease by</option>
									<option>multiply by</option>
									<option>divide by</option>
								</select>
								</div>
								<div class="col-xs-4"><input type="text" class="form-control var" placeholder="Value" /></div>
							</div>

							<div class="row-gutter-1x"><a href="#"><span class="glyphicon glyphicon-plus"></span> Add Another</a></div>

							<p class="quip"><span class="glyphicon glyphicon-arrow-up"></span></p>
						</div><!-- .choiceStoryUpdates -->
					</div>

					<div class="choiceContainer">
						<div class="col-xs-2 choiceUtil icon-subtler">
							<a class="h3" href="#"><span class="glyphicon glyphicon-minus-sign"></span></a>
							<span class="choiceNumber">6</span>
						</div>
						<div class="col-xs-9">
							<p><input type="text" class="form-control" placeholder="Write your choice content here." value="Place the skull onto the pedestal." /></p>

							<p class="choicePassage"><a class="choicePassageUnlink icon-subtle" href="#"><span class="glyphicon glyphicon-remove-circle"></span></a> <a href="#">"Lorem ipsum this is the text of passage 45&hellip;" <span class="passageLink" data-choices="3">P45</span></a></p>
						</div>
						<div class="col-xs-1 choiceLogic h4">
							<a href="#"><span class="glyphicon glyphicon-eye-open"></span></a>
							<a href="#"><span class="glyphicon glyphicon-book"></span> <span class="badge">2</span></a>
						</div>
					</div>
					<hr />
					<hr />
					</div>
					<!-- TODO: end of static example code -->


					<p class="h3 row-gutter-1x"><a ng-click="new_choice(passage)"><span class="glyphicon glyphicon-plus-sign"></span> Add Choice</a></p>
				</div><!-- .passageChoices -->
			</div>
		</div><!-- .passageExits -->
	</div><!-- .passage -->